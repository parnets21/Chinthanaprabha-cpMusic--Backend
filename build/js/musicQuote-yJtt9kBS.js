import{j as e}from"../assets/index-CCaFrZwk.js";import{r as a}from"./chunk-CTJ-xxG2.js";import{y as n}from"./chunk-B_gl6WRw.js";import"./chunk-DS08_OVb.js";import"./chunk-Cjtwp2vM.js";import"./chunk-ngrFHoWO.js";import"./chunk-nx6VVHRj.js";function E(){const[f,w]=a.useState([]),[j,x]=a.useState(!0),[t,m]=a.useState({text:"",artist:"",genre:"",source:""}),[o,p]=a.useState(null),[g,i]=a.useState(!1),[l,v]=a.useState(""),h=async()=>{try{x(!0);const r=await(await fetch("https://cpsangeetha.com/api/musicQuote")).json();w(r),x(!1)}catch{n.error("Failed to fetch quotes"),x(!1)}};a.useEffect(()=>{h()},[]);const c=f.filter(s=>s.text.toLowerCase().includes(l.toLowerCase())||s.artist.toLowerCase().includes(l.toLowerCase())||s.genre&&s.genre.toLowerCase().includes(l.toLowerCase())),d=s=>{m({...t,[s.target.name]:s.target.value})},b=async s=>{s.preventDefault();try{let r;o?(r=await fetch(`https://cpsangeetha.com/api/musicQuote/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n.success("Quote updated successfully")):(r=await fetch("https://cpsangeetha.com/api/musicQuote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n.success("Quote added successfully")),await r.json(),h(),u()}catch{n.error("Operation failed")}},y=s=>{m({text:s.text,artist:s.artist,genre:s.genre||"",source:s.source||""}),p(s._id),i(!0),window.scrollTo({top:0,behavior:"smooth"})},N=async s=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await fetch(`https://cpsangeetha.com/api/musicQuote/${s}`,{method:"DELETE"}),n.success("Quote deleted successfully"),h()}catch{n.error("Failed to delete quote")}},u=()=>{m({text:"",artist:"",genre:"",source:""}),p(null),i(!1)};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Music Quotes"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your collection of inspirational music quotes"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:!g&&e.jsxs("button",{onClick:()=>{i(!0),window.scrollTo({top:0,behavior:"smooth"})},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md flex items-center justify-center gap-2 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Quote"]})})]}),g&&e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:o?"Edit Quote":"Add New Quote"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Close form",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quote Text *"}),e.jsx("textarea",{name:"text",value:t.text,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",rows:4,required:!0,placeholder:"Enter the quote text..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Artist *"}),e.jsx("input",{type:"text",name:"artist",value:t.artist,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,placeholder:"Artist name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Genre"}),e.jsx("input",{type:"text",name:"genre",value:t.genre,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Music genre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Source"}),e.jsx("input",{type:"text",name:"source",value:t.source,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Where this quote is from"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 border border-gray-300 bg-white text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"Update"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Save"]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"All Quotes"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",c.length," ",c.length===1?"quote":"quotes"]})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search quotes...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:l,onChange:s=>v(s.target.value)})]})]})}),j?e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-gray-500",children:"Loading quotes..."})]})}):c.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("p",{className:"mt-3 text-gray-500",children:l?"No quotes match your search":"No quotes found"}),!l&&e.jsxs("button",{onClick:()=>i(!0),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md inline-flex items-center gap-2 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Your First Quote"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-full inline-block align-middle",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[200px]",children:"Quote"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:"Artist"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"Genre"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-normal max-w-xs",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:s.text}),s.source&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Source: ",s.source]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.artist})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.genre?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:s.genre}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>y(s),className:"text-blue-600 hover:text-blue-900 inline-flex items-center gap-1 transition-colors","aria-label":"Edit quote",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),e.jsxs("button",{onClick:()=>N(s._id),className:"text-red-600 hover:text-red-900 inline-flex items-center gap-1 transition-colors","aria-label":"Delete quote",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})})]},s._id))})]})})})})]})]})}export{E as default};
