import{j as e,au as o,av as m}from"../assets/index-DYNONSj5.js";import{r as t}from"./chunk-CTJ-xxG2.js";import{a as h}from"./chunk-ngrFHoWO.js";import"./chunk-DS08_OVb.js";import"./chunk-Cjtwp2vM.js";import"./chunk-nx6VVHRj.js";const j=()=>{const[a,d]=t.useState([]),[c,n]=t.useState(!0),[l,i]=t.useState(null);return t.useEffect(()=>{(async()=>{try{n(!0);const s=localStorage.getItem("token"),x=await h.get("https://cpsangeetha.com/chinthanaprabha/user-auth/admin/referral-earnings",{headers:{Authorization:`Bearer ${s}`}});d(x.data.earnings)}catch(s){console.error("Error fetching referral earnings:",s),i("Failed to fetch referral earnings. Please try again.")}finally{n(!1)}})()},[]),c?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-500"}),e.jsx("p",{className:"ml-4 text-lg text-gray-700",children:"Loading referral earnings..."})]}):l?e.jsxs("div",{className:"text-center p-6 bg-red-100 border border-red-400 text-red-700 rounded-md",children:[e.jsx("p",{className:"font-bold",children:"Error:"}),e.jsx("p",{children:l})]}):e.jsxs("div",{className:"container mx-auto p-6 bg-white shadow-lg rounded-lg",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-8 flex items-center",children:[e.jsx(o,{className:"mr-3 text-red-600"})," Referral Earnings Overview"]}),a.length===0?e.jsxs("div",{className:"text-center p-10 bg-gray-50 rounded-md",children:[e.jsx(m,{className:"mx-auto text-gray-400 text-6xl mb-4"}),e.jsx("p",{className:"text-xl text-gray-600",children:"No referral earnings recorded yet."}),e.jsx("p",{className:"text-md text-gray-500 mt-2",children:"Encourage users to share their referral codes!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider border-b",children:"Referrer (User Who Earned)"}),e.jsx("th",{className:"py-3 px-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider border-b",children:"Referred User (New User)"}),e.jsx("th",{className:"py-3 px-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider border-b",children:"Amount"}),e.jsx("th",{className:"py-3 px-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider border-b",children:"Date"}),e.jsx("th",{className:"py-3 px-4 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider border-b",children:"Description"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-200 last:border-b-0",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-gray-800",children:r.userId?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:r.userId.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.userId.email})]}):"N/A"}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-800",children:r.relatedEntity?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:r.relatedEntity.name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.relatedEntity.email})]}):"N/A"}),e.jsxs("td",{className:"py-3 px-4 text-sm text-green-600 font-semibold",children:["â‚¹",r.amount.toFixed(2)]}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:new Date(r.transactionDate).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:r.description})]},r._id))})]})})]})};export{j as default};
