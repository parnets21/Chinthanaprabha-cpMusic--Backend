import{j as e,f as v}from"../assets/index-Bx54CbTK.js";import{r}from"./chunk-CTJ-xxG2.js";import{a as o}from"./chunk-ngrFHoWO.js";import"./chunk-DS08_OVb.js";import"./chunk-Cjtwp2vM.js";import"./chunk-nx6VVHRj.js";const E=()=>{const[f,m]=r.useState(!1),[g,h]=r.useState(!1),[j,N]=r.useState([]),[s,i]=r.useState({id:null,name:"",mobile:"",password:"",profileImg:null}),[p,t]=r.useState(null),[n,u]=r.useState(!1),c=async()=>{try{const a=new Date().getTime(),l=await o.get(`https://cpsangeetha.com/chinthanaprabha/teacher-auth/teachers?t=${a}`);N(l.data)}catch(a){console.error("Error fetching teachers:",a),t("Failed to fetch teachers")}};r.useEffect(()=>{c()},[]);const d=a=>{i({...s,[a.target.name]:a.target.value})},x=a=>{i({...s,profileImg:a.target.files[0]})},b=async a=>{if(a.preventDefault(),!s.name||!s.mobile||!s.password){t("All fields are required");return}u(!0);try{const l=new FormData;l.append("name",s.name),l.append("mobileNumber",s.mobile),l.append("password",s.password),s.profileImg&&l.append("image",s.profileImg),s.id?(await o.put(`https://cpsangeetha.com/chinthanaprabha/teacher-auth/teacher/${s.id}`,l,{headers:{"Content-Type":"multipart/form-data"}}),await c(),i({id:null,name:"",mobile:"",password:"",profileImg:null}),h(!1)):(await o.post("https://cpsangeetha.com/chinthanaprabha/teacher-auth/register",l,{headers:{"Content-Type":"multipart/form-data"}}),await c(),i({name:"",mobile:"",password:"",profileImg:null}),m(!1)),t(null)}catch(l){console.error("Error submitting form:",l),t("Failed to submit form")}finally{u(!1)}},y=async a=>{try{await o.delete(`https://cpsangeetha.com/chinthanaprabha/teacher-auth/teacher/${a}`),await c(),t(null)}catch(l){console.error("Error deleting teacher:",l),t("Failed to delete teacher")}},w=()=>{i({id:null,name:"",mobile:"",password:"",profileImg:null})};return e.jsxs("div",{className:"container mx-auto p-6 bg-white shadow-md rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Teacher Admin Panel"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Manage teacher accounts and information"})]}),p&&e.jsx("p",{className:"text-red-500",children:p}),e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",placeholder:"Teacher List",className:"border px-3 py-2 rounded w-2/3",disabled:!0}),e.jsx("button",{className:"bg-black text-white px-4 py-2 rounded",onClick:()=>m(!0),children:"Add New Teacher"})]}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border px-4 py-2",children:"Profile"}),e.jsx("th",{className:"border px-4 py-2",children:"Name"}),e.jsx("th",{className:"border px-4 py-2",children:"Mobile Number"}),e.jsx("th",{className:"border px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:j.map(a=>e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{className:"border px-4 py-2",children:a.image?e.jsx("img",{src:`${a.image}?t=${new Date().getTime()}`,alt:a.name,className:"w-10 h-10 rounded-full object-cover"},`${a._id}-${a.image}-${new Date().getTime()}`):e.jsx("span",{className:"text-gray-500 text-xl",children:"ðŸ‘¤"})}),e.jsx("td",{className:"border px-4 py-2",children:a.name}),e.jsx("td",{className:"border px-4 py-2",children:a.mobileNumber}),e.jsx("td",{className:"border px-4 py-2",children:e.jsx("button",{className:"text-red-500 px-2",onClick:()=>y(a._id),children:e.jsx(v,{})})})]},a._id))})]}),f&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-1/3",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Add Teacher"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:d,placeholder:"Teacher name",className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Mobile Number"}),e.jsx("input",{type:"text",name:"mobile",value:s.mobile,onChange:d,placeholder:"Mobile number",className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:d,placeholder:"Password",className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Profile Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"w-full border px-3 py-2 rounded"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>m(!1),disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded",disabled:n,children:n?"Adding...":"Add Teacher"})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-1/3",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Edit Teacher"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:d,placeholder:"Teacher name",className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Mobile Number"}),e.jsx("input",{type:"text",name:"mobile",value:s.mobile,onChange:d,placeholder:"Mobile number",className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:d,placeholder:"Password",className:"w-full border px-3 py-2 rounded",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Profile Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"w-full border px-3 py-2 rounded"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded",onClick:()=>{h(!1),w()},disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded",disabled:n,children:n?"Saving...":"Save Changes"})]})]})]})})]})};export{E as default};
