import{j as e,i as Me,k as Ie,f as le,l as Pe,F as Ue}from"../assets/index-Dl1hLtoB.js";import{r as u}from"./chunk-CTJ-xxG2.js";import{a as N}from"./chunk-ngrFHoWO.js";import"./chunk-DS08_OVb.js";import"./chunk-Cjtwp2vM.js";import"./chunk-nx6VVHRj.js";const qe=()=>{var re;const[w,L]=u.useState([]),[U,M]=u.useState(!0),[W,G]=u.useState(""),[J,Y]=u.useState([]),[H,Q]=u.useState(!1),[A,X]=u.useState(""),[ie,C]=u.useState(!1),[f,B]=u.useState(""),[x,D]=u.useState(null),[d,b]=u.useState({name:"",description:"",price:"",instructor:"",image:null,lessons:[{videoFiles:[],lessonNumber:"",lessonIntro:""}]}),[ce,I]=u.useState({}),[Z,_]=u.useState({}),[T,K]=u.useState({}),[k,z]=u.useState({}),[S,ee]=u.useState(!1),[se,$]=u.useState(0),[v,de]=u.useState(1),q=5;u.useEffect(()=>{O(),me()},[]),u.useEffect(()=>()=>{Object.values(T).forEach(s=>s.abort()),console.log("Cancelled all uploads on unmount")},[T]),u.useEffect(()=>{if(!S)return;const s=setInterval(()=>{$(t=>{const r=Math.min(t+5,95);return t>=95?95:r})},500);return()=>clearInterval(s)},[S]);const j=async s=>{var t;try{const r=await s;return console.log("API Response:",r.data),r}catch(r){throw console.error("API Error:",((t=r.response)==null?void 0:t.data)||r.message),r}},O=async()=>{M(!0),G("");try{const s=await j(N.get("https://cpsangeetha.com/chinthanaprabha/courses-lessons/courses"));L(s.data||[])}catch{G("Failed to load courses")}finally{M(!1)}},me=async()=>{Q(!0),X("");try{const s=await j(N.get("https://cpsangeetha.com/chinthanaprabha/teacher-auth/teachers"));Y(s.data||[])}catch{X("Failed to load instructors"),Y([])}finally{Q(!1)}},ue=async(s,t,r)=>{var i,c,m,a;const n=new AbortController;K(l=>({...l,[t]:n})),I(l=>({...l,[t]:!0})),_(l=>({...l,[t]:0}));try{if(!s.type.startsWith("video/"))throw new Error(`${s.name} is not a valid video file`);if(s.size>10*1024*1024*1024)throw new Error(`${s.name} exceeds 10GB limit`);const l=new FormData;l.append("video",s);const o=await fetch(r,{method:"POST",body:l,signal:n.signal});if(!o.ok)throw new Error(`Upload failed: ${o.statusText}`);const h=o.body.getReader(),y=new TextDecoder;let g="";for(;;){const{done:Se,value:Le}=await h.read();if(Se)break;g+=y.decode(Le,{stream:!0});const ae=g.split(`
`);g=ae.pop();for(const ne of ae)if(ne.startsWith("data: "))try{const p=JSON.parse(ne.slice(6));if(p.type==="progress")_(E=>({...E,[t]:p.percentage})),z(E=>({...E,[t]:{uploadedMB:p.uploadedMB,totalMB:p.totalMB,currentSpeed:p.currentSpeed,eta:p.eta,elapsed:p.elapsed,fileName:p.fileName}})),console.log(`📊 Upload ${t}: ${p.percentage}% (${p.uploadedMB}/${p.totalMB}MB, ${p.currentSpeed}MB/s, ETA: ${p.eta}s)`);else{if(p.type==="complete")return I(E=>({...E,[t]:!1})),z(E=>{const oe={...E};return delete oe[t],oe}),p.location;if(p.type==="error")throw new Error(p.message)}}catch(p){console.error("Error parsing SSE data:",p)}}throw new Error("Upload completed but no location received")}catch(l){throw I(o=>({...o,[t]:!1})),l.name==="AbortError"?new Error("Upload cancelled"):l.code==="ECONNABORTED"?new Error(`Upload timeout for ${s.name}. Please try again.`):((i=l.response)==null?void 0:i.status)===413?new Error(`${s.name} is too large. Maximum size is 10GB.`):((c=l.response)==null?void 0:c.status)>=500?new Error(`Server error uploading ${s.name}. Please try again later.`):new Error(((a=(m=l.response)==null?void 0:m.data)==null?void 0:a.error)||l.message||`Failed to upload ${s.name}`)}finally{K(l=>{const o={...l};return delete o[t],o})}},he=async(s,t)=>{const r=Array.from(t.target.files);if(!r.length)return;const n=[],i=r.filter(c=>c.type.startsWith("video/")?c.size>10*1024*1024*1024?(n.push(`${c.name} exceeds 10GB limit`),!1):!0:(n.push(`${c.name} is not a video file`),!1));if(n.length>0&&alert(`File validation errors:
${n.join(`
`)}`),i.length===0){t.target.value="";return}try{const c=i.map(async(o,h)=>{const y=`lesson-${s}-file-${Date.now()}-${h}`;try{const g=await ue(o,y,"https://cpsangeetha.com/chinthanaprabha/upload-video");return{name:o.name,size:o.size,type:o.type,url:g,success:!0}}catch(g){return console.error(`Failed to upload ${o.name}:`,g),{name:o.name,size:o.size,type:o.type,error:g.message,success:!1}}}),m=await Promise.all(c),a=m.filter(o=>o.success),l=m.filter(o=>!o.success);if(a.length>0&&b(o=>({...o,lessons:o.lessons.map((h,y)=>y===s?{...h,videoFiles:[...h.videoFiles||[],...a]}:h)})),a.length>0&&l.length===0)alert(`Successfully uploaded ${a.length} video(s)`);else if(a.length>0&&l.length>0){const o=l.map(h=>h.name).join(", ");alert(`Uploaded ${a.length} video(s) successfully.
Failed: ${o}`)}else{const o=l.map(h=>h.name).join(", ");alert(`All uploads failed:
${o}`)}}catch(c){console.error("Unexpected error during upload:",c),alert(`Unexpected error: ${c.message}`)}finally{t.target.value=""}},pe=(s,t)=>{b(r=>({...r,lessons:r.lessons.map((n,i)=>i===s?{...n,videoFiles:n.videoFiles.filter((c,m)=>m!==t)}:n)}))},xe=s=>{window.confirm("Remove all videos from this lesson?")&&b(t=>({...t,lessons:t.lessons.map((r,n)=>n===s?{...r,videoFiles:[]}:r)}))},ge=s=>{const t=T[s];t&&(t.abort(),I(r=>({...r,[s]:!1})),_(r=>({...r,[s]:0})),z(r=>{const n={...r};return delete n[s],n}),alert("Upload cancelled"))},F=(s,t=-1)=>{const{name:r,value:n,files:i}=s.target;b(r==="image"?c=>({...c,image:i[0]}):t===-1?c=>({...c,[r]:n}):c=>({...c,lessons:c.lessons.map((m,a)=>a===t?{...m,[r]:n}:m)}))},fe=()=>{b(s=>({...s,lessons:[...s.lessons,{videoFiles:[],lessonNumber:"",lessonIntro:""}]}))},be=s=>{b(t=>({...t,lessons:t.lessons.filter((r,n)=>n!==s)}))},je=()=>{B("add"),D(null),b({name:"",description:"",price:"",instructor:"",image:null,lessons:[{videoFiles:[],lessonNumber:"",lessonIntro:""}]}),C(!0)},Ne=s=>{var t,r;B("edit"),D(s),b({name:s.name||"",description:s.description||"",price:s.price||"",instructor:((t=s.instructor)==null?void 0:t._id)||s.instructor||"",image:null,currentImage:s.image,lessons:(r=s.lessons)!=null&&r.length?s.lessons.map(n=>{var i;return{lessonNumber:n.lessonNumber||"",lessonIntro:n.lessonIntro||"",videoFiles:((i=n.videoUrls)==null?void 0:i.map(c=>({url:c,name:c.split("/").pop(),size:0,type:"video/mp4"})))||[],_id:n._id}}):[{videoFiles:[],lessonNumber:"",lessonIntro:""}]}),C(!0)},ve=s=>{B("view"),D(s),C(!0)},ye=async s=>{if(confirm("Are you sure you want to delete this course?"))try{await j(N.delete(`https://cpsangeetha.com/chinthanaprabha/courses-lessons/courses/${s}`)),L(w.filter(t=>t._id!==s))}catch{alert("Failed to delete course")}},we=s=>{const t=[],r=s.map(i=>i.lessonNumber).filter(Boolean),n=r.filter((i,c)=>r.indexOf(i)!==c);return n.length>0&&t.push(`Duplicate lesson numbers found: ${[...new Set(n)].join(", ")}`),s.forEach((i,c)=>{var m,a,l;(m=i.lessonNumber)!=null&&m.trim()||t.push(`Lesson ${c+1}: Lesson number is required`),(a=i.lessonIntro)!=null&&a.trim()||t.push(`Lesson ${c+1}: Lesson intro is required`),(!((l=i.videoFiles)!=null&&l.length)||i.videoFiles.every(o=>!o.url))&&t.push(`Lesson ${c+1}: At least one video is required`)}),t},Ce=async(s,t)=>{var i,c,m;if(!((i=s.lessonNumber)!=null&&i.trim())||!((c=s.lessonIntro)!=null&&c.trim()))throw new Error(`Lesson ${s.lessonNumber||"Unknown"}: Missing required fields`);const r=new FormData;r.append("lessonNumber",s.lessonNumber),r.append("lessonIntro",s.lessonIntro);const n=(m=s.videoFiles)==null?void 0:m.map(a=>a.url).filter(Boolean);if(!n||n.length===0)throw new Error(`Lesson ${s.lessonNumber}: At least one video is required`);return n.forEach(a=>r.append("videoUrls",a)),s._id?await j(N.put(`https://cpsangeetha.com/chinthanaprabha/courses-lessons/lessons/${s._id}`,r,{headers:{"Content-Type":"multipart/form-data"}})):await j(N.post(`https://cpsangeetha.com/chinthanaprabha/courses-lessons/courses/${t}/lessons`,r,{headers:{"Content-Type":"multipart/form-data"}}))},$e=async s=>{if(s.preventDefault(),!d.name||!d.description||!d.price||!d.instructor){alert("Please fill in all required fields");return}if(f==="add"&&!d.image){alert("Please select a course image");return}const t=we(d.lessons);if(t.length>0){alert(`Please fix the following errors:
${t.join(`
`)}`);return}ee(!0),$(0);let r=null;try{const n=new FormData;n.append("name",d.name),n.append("description",d.description),n.append("price",d.price),n.append("instructor",d.instructor),d.image&&n.append("thumbnail",d.image),f==="add"?(r=(await j(N.post("https://cpsangeetha.com/chinthanaprabha/courses-lessons/courses",n,{headers:{"Content-Type":"multipart/form-data"}}))).data._id,$(30)):(r=x._id,await j(N.put(`https://cpsangeetha.com/chinthanaprabha/courses-lessons/courses/${r}`,n,{headers:{"Content-Type":"multipart/form-data"}})),$(30));const i=d.lessons.filter(a=>{var l,o,h;return((l=a.lessonNumber)==null?void 0:l.trim())&&((o=a.lessonIntro)==null?void 0:o.trim())&&((h=a.videoFiles)==null?void 0:h.length)>0});if(i.length===0)throw new Error("No valid lessons to process");const c=50/i.length;let m=30;for(let a=0;a<i.length;a++){const l=i[a];try{await Ce(l,r),m+=c,$(Math.round(m))}catch(o){throw console.error(`Failed to process lesson ${l.lessonNumber}:`,o),new Error(`Failed to process lesson ${l.lessonNumber}: ${o.message}`)}}if(f==="edit"&&x.lessons){const a=d.lessons.filter(o=>o._id).map(o=>o._id),l=x.lessons.filter(o=>!a.includes(o._id));for(const o of l)try{await j(N.delete(`https://cpsangeetha.com/chinthanaprabha/courses-lessons/lessons/${o._id}`))}catch(h){console.error(`Failed to delete lesson ${o._id}:`,h)}}$(100),alert(f==="add"?"Course added successfully!":"Course updated successfully!"),C(!1),await O()}catch(n){if(console.error("Course submission error:",n),f==="add"&&r)try{await j(N.delete(`https://cpsangeetha.com/chinthanaprabha/courses-lessons/courses/${r}`)),console.log("Rolled back course creation due to error")}catch(i){console.error("Failed to rollback course creation:",i)}alert(`Error saving course: ${n.message}`)}finally{ee(!1),$(0)}},te=v*q,Fe=te-q,Ee=(w||[]).slice(Fe,te),P=Math.ceil((w||[]).length/q),V=s=>de(s),ke=s=>{if(s===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(t));return`${(s/Math.pow(t,n)).toFixed(2)} ${r[n]}`};return e.jsxs("div",{className:"h-screen p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Course Management"}),e.jsx("button",{onClick:je,className:"bg-black text-white px-4 py-2 rounded",children:"Add New Course"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:U?e.jsx("div",{className:"p-8 text-center",children:"Loading courses..."}):W?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:W}),e.jsx("button",{onClick:O,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Retry"})]}):(w||[]).length===0?e.jsx("div",{className:"p-8 text-center",children:"No courses found. Add your first course!"}):e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-white",children:[e.jsx("th",{className:"w-16 px-4 py-2 text-center",children:"ID"}),e.jsx("th",{className:"w-20 px-4 py-2 text-center",children:"Image"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Instructor"}),e.jsx("th",{className:"w-20 px-4 py-2 text-center",children:"Videos"}),e.jsx("th",{className:"w-20 px-4 py-2 text-center",children:"Lessons"}),e.jsx("th",{className:"w-20 px-4 py-2 text-center",children:"Price"}),e.jsx("th",{className:"w-32 px-4 py-2 text-center",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Ee.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2",children:s._id.substring(0,6)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(R,{image:s.image,name:s.name})}),e.jsx("td",{className:"px-4 py-2",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:((t=s.instructor)==null?void 0:t.name)||"N/A"}),e.jsx("td",{className:"px-4 py-2",children:(s.lessons||[]).reduce((r,n)=>{var i;return r+(((i=n.videoUrls)==null?void 0:i.length)||0)},0)}),e.jsx("td",{className:"px-4 py-2",children:(s.lessons||[]).length}),e.jsxs("td",{className:"px-4 py-2",children:["₹",s.price]}),e.jsxs("td",{className:"px-4 py-2 space-x-3 text-right",children:[e.jsx("button",{onClick:()=>ve(s),className:"text-indigo-600 hover:text-indigo-900",children:e.jsx(Me,{size:18})}),e.jsx("button",{onClick:()=>Ne(s),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Ie,{size:18})}),e.jsx("button",{onClick:()=>ye(s._id),className:"text-red-600 hover:text-red-900",children:e.jsx(le,{size:18})})]})]},s._id)})})]})}),e.jsx("div",{className:"flex justify-end mt-4 mb-4 pr-4",children:e.jsxs("nav",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>V(Math.max(1,v-1)),disabled:v===1,className:`px-3 py-1 mx-1 rounded ${v===1?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Previous"}),Array.from({length:P},(s,t)=>t+1).map(s=>e.jsx("button",{onClick:()=>V(s),className:`px-3 py-1 mx-1 rounded ${v===s?"bg-black text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:s},s)),e.jsx("button",{onClick:()=>V(Math.min(P,v+1)),disabled:v===P,className:`px-3 py-1 mx-1 rounded ${v===P?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300 text-gray-700"}`,children:"Next"})]})}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsx("button",{onClick:()=>C(!1),className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-bold mb-4 text-left",children:f==="view"?"Course Details":f==="add"?"Add New Course":"Edit Course"}),f==="view"&&x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Course Image"}),e.jsx(R,{image:x.image,name:x.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Course Name"}),e.jsx("p",{children:x.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Description"}),e.jsx("p",{children:x.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Instructor"}),e.jsx("p",{children:((re=x.instructor)==null?void 0:re.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Price"}),e.jsxs("p",{children:["₹",x.price]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Lessons"}),e.jsx("ul",{className:"list-disc pl-5",children:(x.lessons||[]).map((s,t)=>e.jsxs("li",{children:["Lesson ",s.lessonNumber,": ",s.lessonIntro]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-left",children:"Videos"}),(()=>{const s=(x.lessons||[]).flatMap(t=>(t.videoUrls||[]).map((r,n)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Lesson ",t.lessonNumber," - Video ",n+1]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r}),e.jsx("video",{src:r,controls:!0,className:"w-full h-64 mt-2 rounded-lg",preload:"metadata",children:"Your browser does not support the video tag."})]},`${t.lessonNumber}-${n}`)));return s.length>0?s:e.jsx("p",{className:"text-gray-500",children:"No videos available."})})()]}),e.jsx("button",{onClick:()=>C(!1),className:"w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Close"})]}):e.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-left",children:"Course Image"}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:F,className:"mt-1 w-full"}),f==="edit"&&d.currentImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Current image:"}),e.jsx(R,{image:d.currentImage,name:d.name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-left",children:"Course Name"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:F,className:"mt-1 w-full px-3 py-2 border rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-left",children:"Description"}),e.jsx("textarea",{name:"description",value:d.description,onChange:F,rows:3,className:"mt-1 w-full px-3 py-2 border rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-left",children:"Instructor"}),e.jsxs("select",{name:"instructor",value:d.instructor,onChange:F,className:"mt-1 w-full px-3 py-2 border rounded-md",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:H?"Loading...":"Select an instructor"}),A&&e.jsx("option",{value:"",disabled:!0,children:A}),!H&&!A&&(J||[]).length===0&&e.jsx("option",{value:"",disabled:!0,children:"No instructors found"}),(J||[]).map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-left",children:"Price"}),e.jsx("input",{type:"number",name:"price",value:d.price,onChange:F,className:"mt-1 w-full px-3 py-2 border rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-left",children:"Lessons"}),(d.lessons||[]).map((s,t)=>{var r,n,i,c,m;return e.jsxs("div",{className:"mt-4 p-4 border rounded-md",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("h4",{className:"text-lg font-medium",children:["Lesson ",t+1]}),e.jsx("button",{type:"button",onClick:()=>be(t),className:"text-red-600 hover:text-red-800",children:e.jsx(Pe,{})})]}),e.jsx("input",{type:"text",placeholder:"Lesson Number",name:"lessonNumber",value:s.lessonNumber,onChange:a=>F(a,t),className:`w-full px-3 py-2 border rounded-md mb-2 ${(r=s.lessonNumber)!=null&&r.trim()?"border-gray-300":"border-red-300 bg-red-50"}`,required:!0}),e.jsx("input",{type:"text",placeholder:"Lesson Intro",name:"lessonIntro",value:s.lessonIntro,onChange:a=>F(a,t),className:`w-full px-3 py-2 border rounded-md mb-2 ${(n=s.lessonIntro)!=null&&n.trim()?"border-gray-300":"border-red-300 bg-red-50"}`,required:!0}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-medium text-left ${!((i=s.videoFiles)!=null&&i.length)||s.videoFiles.every(a=>!a.url)?"text-red-600":"text-gray-700"}`,children:["Videos (Up to 10GB) ",(!((c=s.videoFiles)!=null&&c.length)||s.videoFiles.every(a=>!a.url))&&"*"]}),e.jsx("input",{type:"file",accept:"video/*",multiple:!0,onChange:a=>he(t,a),className:"mt-1 w-full"}),Object.keys(ce).filter(a=>a.startsWith(`lesson-${t}-`)).map(a=>{var l,o,h,y,g;return e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:"📹 Uploading video..."}),e.jsx("button",{onClick:()=>ge(a),className:"text-red-600 hover:text-red-800 font-medium",children:"Cancel"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Z[a]||0}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("p",{className:"text-sm font-medium text-blue-700",children:[Z[a]||0,"%"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("span",{className:"inline-block mr-3",children:["📊 Speed: ",e.jsxs("span",{className:"font-mono",children:[((l=k[a])==null?void 0:l.currentSpeed)||"--"," MB/s"]})]}),e.jsxs("span",{className:"inline-block",children:["⏱️ ETA: ",e.jsxs("span",{className:"font-mono",children:[((o=k[a])==null?void 0:o.eta)||"--","s"]})]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["💾 Size: ",e.jsxs("span",{className:"font-mono",children:[((h=k[a])==null?void 0:h.uploadedMB)||"--"," MB / ",((y=k[a])==null?void 0:y.totalMB)||"--"," MB"]}),((g=k[a])==null?void 0:g.elapsed)&&e.jsxs("span",{className:"ml-3",children:["⏰ Elapsed: ",e.jsxs("span",{className:"font-mono",children:[k[a].elapsed,"s"]})]})]})]},a)}),((m=s.videoFiles)==null?void 0:m.length)>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{children:["Added Videos (",s.videoFiles.length,")"]}),e.jsx("button",{type:"button",onClick:()=>xe(t),className:"text-red-600 hover:text-red-800",children:"Clear All"})]}),s.videoFiles.map((a,l)=>e.jsxs("div",{className:"flex justify-between mt-1 bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"truncate",children:[a.name," (",ke(a.size),")",a.url&&e.jsx("span",{className:"ml-1 text-green-600",children:"(Uploaded)"})]}),e.jsx("button",{type:"button",onClick:()=>pe(t,l),className:"text-red-600 hover:text-red-800",children:e.jsx(le,{size:14})})]},l))]})]})]},t)}),e.jsxs("button",{type:"button",onClick:fe,className:"mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:[e.jsx(Ue,{className:"inline-block mr-2"})," Add Lesson"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:S,className:`flex-1 px-4 py-2 rounded text-white ${S?"bg-blue-300":"bg-blue-500 hover:bg-blue-600"}`,children:S?`Processing... ${se}%`:f==="add"?"Add Course":"Update Course"}),S&&e.jsx("div",{className:"w-40",children:e.jsx("div",{className:"h-2 bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${se}%`}})})}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},R=({image:w,name:L})=>{const[U,M]=u.useState(!1);return e.jsx("img",{src:U||!w?"/placeholder.svg":w,alt:L,className:"h-10 w-10 rounded-full",onError:()=>M(!0)})};export{qe as default};
