import{c as xe,j as e,T as ee,P as C,S as Ee,a as $e,X as te,b as Pe,E as Ie,d as Fe,C as Te,e as Le,I as _e,B as ze,U as Be}from"../assets/index-BFsjM1Ls.js";import{r as n}from"./chunk-CTJ-xxG2.js";import{a as h}from"./chunk-ngrFHoWO.js";import{R as Ue}from"./chunk-CdtRKNhq.js";import{B as se,R as A,C as Ke,f as ae,X as re,Y as le,T as R,L as ne,A as ie,g as Me,h as ce,i as de,j as oe,k as me}from"./chunk-nx6VVHRj.js";import{C as Ge}from"./chunk-D65n6BsV.js";import"./chunk-DS08_OVb.js";import"./chunk-Cjtwp2vM.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],qe=xe("arrow-up-right",Ye);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qe=xe("circle-alert",Xe),rt=()=>{var X,Q,V,W;const[k,he]=n.useState([]),[_,ue]=n.useState([]),[z,ge]=n.useState([]),[D,pe]=n.useState([]),[B,je]=n.useState([]),[ye,O]=n.useState(!0),[U,K]=n.useState(null),[p,fe]=n.useState("overview"),[j,ve]=n.useState(""),[y,be]=n.useState("all"),[M,E]=n.useState(null),[$,f]=n.useState(""),[l,P]=n.useState(null),[I,F]=n.useState(!1),u=["#0D0D0D","#8B0000","#4361EE","#3A0CA3","#7209B7","#F72585","#4CC9F0","#06FFA5"],G="https://cpsangeetha.com/chinthanaprabha",T="https://cpsangeetha.com/api/order",Y="https://cpsangeetha.com/chinthanaprabha/payment",Ne={"Total Students":e.jsx(Be,{className:"h-8 w-8 text-blue-500"}),"Active Courses":e.jsx(ze,{className:"h-8 w-8 text-green-500"}),"Course Revenue":e.jsx(_e,{className:"h-8 w-8 text-purple-500"}),"Total Orders":e.jsx(C,{className:"h-8 w-8 text-orange-500"}),"Ecommerce Revenue":e.jsx(Le,{className:"h-8 w-8 text-red-500"}),"Pending Orders":e.jsx(Te,{className:"h-8 w-8 text-yellow-500"}),"Total Revenue":e.jsx(ee,{className:"h-8 w-8 text-emerald-500"})},v=async(t=!1)=>{t?F(!0):O(!0),K(null);try{const[a,g]=await Promise.all([h.get(`${G}/user-auth/users`),h.get(`${G}/courses-lessons/courses`)]);let i;try{i=await h.get(`${Y}/report`),console.log("Payment API response:",i.data)}catch{console.warn("New payment API not available, trying fallback..."),i=await h.get(`${Y}/payments`),console.log("Fallback payment API response:",i.data)}const[c,Ve]=await Promise.all([h.get(`${T}?limit=1000&sortBy=createdAt&sortOrder=desc`),h.get(`${T}/stats/overview`)]);console.log("Orders API response:",c.data),console.log("Order fields:",c.data.data.map(s=>({id:s._id,total:s.total,totalAmount:s.totalAmount,amount:s.amount,totalPrice:s.totalPrice,createdAt:s.createdAt})));const Se=a.data.users?a.data.users.length:0,Ce=g.data.length;let H,L=0;const m=i.data.payments||i.data;m&&Array.isArray(m)?(H=m.length,L=m.reduce((s,r)=>s+(r.totalAmount||r.amount||0),0)):(console.warn("No payment data available"),H=0);const Ae=c.data.data.length,J=c.data.data.reduce((s,r)=>s+(r.total||r.totalAmount||r.amount||r.totalPrice||0),0),Re=c.data.data.filter(s=>s.status==="processing").length,ke=[{title:"Total Students",value:Se,color:"blue",trend:"up"},{title:"Active Courses",value:Ce,color:"green",trend:"up"},{title:"Total Orders",value:Ae,color:"orange",trend:"up"},{title:"Course Revenue",value:`₹${L.toLocaleString()}`,color:"purple",trend:"up"},{title:"Ecommerce Revenue",value:`₹${J.toLocaleString()}`,color:"red",trend:"up"},{title:"Total Revenue",value:`₹${(L+J).toLocaleString()}`,color:"emerald",trend:"up"},{title:"Pending Orders",value:Re,color:"yellow",trend:"down"}];he(ke),pe(c.data.data);const d={};m&&Array.isArray(m)&&m.forEach(s=>{const r=new Date(s.paymentDate);if(isNaN(r.getTime()))return;const x=`${r.toLocaleString("default",{month:"short"})} ${r.getFullYear()}`;d[x]||(d[x]={courseRevenue:0,ecommerceRevenue:0}),d[x].courseRevenue+=s.totalAmount||s.amount||0}),c.data.data.forEach(s=>{const r=new Date(s.createdAt);if(isNaN(r.getTime()))return;const x=`${r.toLocaleString("default",{month:"short"})} ${r.getFullYear()}`;d[x]||(d[x]={courseRevenue:0,ecommerceRevenue:0}),d[x].ecommerceRevenue+=s.total||s.totalAmount||s.amount||s.totalPrice||0});const Z=Object.keys(d).map(s=>({month:s,courseRevenue:d[s].courseRevenue,ecommerceRevenue:d[s].ecommerceRevenue,totalRevenue:d[s].courseRevenue+d[s].ecommerceRevenue})).sort((s,r)=>new Date(`01 ${s.month}`)-new Date(`01 ${r.month}`));console.log("Combined revenue data:",Z),je(Z);const w={};c.data.data.forEach(s=>{w[s.status]=(w[s.status]||0)+1});const De=Object.keys(w).map((s,r)=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:w[s],fill:u[r%u.length]}));ue(De);const S={};c.data.data.forEach(s=>{const r=s.paymentStatus||"pending";S[r]=(S[r]||0)+1});const Oe=Object.keys(S).map((s,r)=>({name:s.charAt(0).toUpperCase()+s.slice(1),value:S[s],fill:u[(r+4)%u.length]}));ge(Oe),O(!1),F(!1)}catch(a){console.error("Error fetching dashboard data:",a),K(a.message),O(!1),F(!1)}};n.useEffect(()=>{v()},[]);const we=async t=>{if($)try{await h.put(`${T}/${t}`,{status:$,isAdminAction:!0}),v(!0),E(null),f("")}catch(a){console.error("Error updating order:",a),alert("Failed to update order status")}},b=D.filter(t=>{var i;const a=t._id.toLowerCase().includes(j.toLowerCase())||(((i=t.customer)==null?void 0:i.name)||"").toLowerCase().includes(j.toLowerCase()),g=y==="all"||t.status===y;return a&&g}),o=t=>`₹${Number(t||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,q=t=>{if(!t)return"N/A";try{const a=new Date(t);return isNaN(a.getTime())?"Invalid Date":a.toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}},N={processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};return ye&&!k.length?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"h-4 w-1/2 mb-2 bg-gray-200 rounded"}),e.jsx("div",{className:"h-8 w-1/3 bg-gray-200 rounded"})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"h-4 w-1/3 mb-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-[300px] w-full bg-gray-200 rounded"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("div",{className:"h-4 w-1/3 mb-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-[300px] w-full bg-gray-200 rounded"})]})]})]})}):U&&!k.length?e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg flex items-start",children:[e.jsx(Qe,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Error loading dashboard"}),e.jsx("p",{className:"text-sm",children:U}),e.jsx("button",{onClick:()=>v(),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 rounded text-sm transition-colors",children:"Try Again"})]})]})}):e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Course Management & Ecommerce Analytics"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:()=>v(!0),disabled:I,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 flex items-center gap-2 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[e.jsx(Ue,{className:`h-4 w-4 ${I?"animate-spin":""}`}),I?"Refreshing...":"Refresh"]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:ee},{id:"orders",label:"Order Management",icon:C},{id:"analytics",label:"Analytics",icon:se}].map(t=>e.jsxs("button",{onClick:()=>fe(t.id),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${p===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(t.icon,{className:"h-4 w-4"}),t.label]},t.id))})})}),p==="overview"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:k.map((t,a)=>e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition transform hover:-translate-y-1 border-l-4",style:{borderLeftColor:u[a%u.length]},children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 text-sm font-medium mb-1",children:t.title}),e.jsx("p",{className:"text-2xl font-bold",children:t.value}),t.change&&e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[e.jsx(qe,{className:`h-4 w-4 ${t.trend==="up"?"text-green-500":"text-red-500"}`}),e.jsx("span",{className:t.trend==="up"?"text-green-600":"text-red-600",children:t.change}),e.jsx("span",{className:"text-gray-500 ml-1",children:"from last month"})]})]}),Ne[t.title]]})},a))}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Revenue Overview"}),e.jsx("div",{className:"h-[400px]",children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(Ke,{data:B,margin:{top:20,right:30,left:20,bottom:20},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"courseGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#8B0000"}),e.jsx("stop",{offset:"100%",stopColor:"#0D0D0D"})]}),e.jsxs("linearGradient",{id:"ecommerceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#4361EE"}),e.jsx("stop",{offset:"100%",stopColor:"#3A0CA3"})]})]}),e.jsx(ae,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(re,{dataKey:"month",tick:{fill:"#666",fontSize:12}}),e.jsx(le,{tickFormatter:t=>`₹${t.toLocaleString()}`,tick:{fill:"#666",fontSize:12}}),e.jsx(R,{formatter:(t,a)=>[o(t),a],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"none"}}),e.jsx(ne,{verticalAlign:"top",height:36}),e.jsx(ie,{type:"monotone",dataKey:"courseRevenue",stroke:"#8B0000",fill:"url(#courseGradient)",fillOpacity:.6,name:"Course Revenue"}),e.jsx(ie,{type:"monotone",dataKey:"ecommerceRevenue",stroke:"#4361EE",fill:"url(#ecommerceGradient)",fillOpacity:.6,name:"Ecommerce Revenue"}),e.jsx(Me,{type:"monotone",dataKey:"totalRevenue",stroke:"#06FFA5",strokeWidth:3,dot:{r:4},name:"Total Revenue"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Order Status Distribution"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(ce,{children:[e.jsx(de,{data:_,cx:"50%",cy:"50%",outerRadius:100,innerRadius:40,paddingAngle:2,dataKey:"value",label:({name:t,percent:a})=>`${t} (${(a*100).toFixed(0)}%)`,children:_.map((t,a)=>e.jsx(oe,{fill:t.fill},`cell-${a}`))}),e.jsx(R,{})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Payment Status Distribution"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(ce,{children:[e.jsx(de,{data:z,cx:"50%",cy:"50%",outerRadius:100,innerRadius:40,paddingAngle:2,dataKey:"value",label:({name:t,percent:a})=>`${t} (${(a*100).toFixed(0)}%)`,children:z.map((t,a)=>e.jsx(oe,{fill:t.fill},`cell-${a}`))}),e.jsx(R,{})]})})})]})]})]}),p==="orders"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-700",children:["Order Management (",D.length," total orders)"]}),b.length!==D.length&&e.jsxs("span",{className:"text-sm text-gray-500",children:["(",b.length," filtered)"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1 w-full",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ee,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search orders by ID or customer...",className:"pl-10 w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:j,onChange:t=>ve(t.target.value)})]}),e.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y,onChange:t=>be(t.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length>0?b.map(t=>{var a,g,i;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 text-gray-400 mr-2"}),"#",t._id.slice(-8)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:((a=t.customer)==null?void 0:a.name)||((g=t.customerInfo)==null?void 0:g.name)||"N/A"}),e.jsx("div",{className:"text-gray-500",children:t.customerModel||"User"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(t.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium",children:[((i=t.items)==null?void 0:i.length)||0," items"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:o(t.total||t.totalAmount||t.amount||t.totalPrice)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${N[t.paymentStatus]||N.pending}`,children:t.paymentStatus||"pending"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M===t._id?e.jsxs("select",{value:$,onChange:c=>f(c.target.value),className:"border px-3 py-1 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}):e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${N[t.status]||N.pending}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm flex gap-2",children:M===t._id?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex items-center gap-1 bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",onClick:()=>we(t._id),children:[e.jsx($e,{size:16}),"Save"]}),e.jsxs("button",{className:"flex items-center gap-1 bg-gray-400 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm",onClick:()=>{E(null),f("")},children:[e.jsx(te,{size:16}),"Cancel"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex items-center gap-1 bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1 rounded text-sm",onClick:()=>{E(t._id),f(t.status)},children:[e.jsx(Pe,{size:16}),"Edit"]}),e.jsxs("button",{className:"flex items-center gap-1 bg-gray-50 hover:bg-gray-100 text-gray-600 px-3 py-1 rounded text-sm",onClick:()=>P(t),children:[e.jsx(Ie,{size:16}),"View"]})]})})]},t._id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8 text-gray-400",children:j||y!=="all"?"No orders match your search criteria.":"No orders found."})})})]})})]}),p==="analytics"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Revenue Comparison"}),e.jsx("div",{className:"h-[350px]",children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(se,{data:B,children:[e.jsx(ae,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(re,{dataKey:"month",tick:{fill:"#666",fontSize:12}}),e.jsx(le,{tickFormatter:t=>`₹${t.toLocaleString()}`,tick:{fill:"#666",fontSize:12}}),e.jsx(R,{formatter:(t,a)=>[o(t),a]}),e.jsx(ne,{}),e.jsx(me,{dataKey:"courseRevenue",fill:"#8B0000",name:"Course Revenue"}),e.jsx(me,{dataKey:"ecommerceRevenue",fill:"#4361EE",name:"Ecommerce Revenue"})]})})})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Order Details #",l._id.slice(-8)]}),e.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:()=>P(null),children:e.jsx(te,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Order Items (",((X=l.items)==null?void 0:X.length)||0,")"]}),e.jsx("div",{className:"space-y-3",children:(Q=l.items)==null?void 0:Q.map((t,a)=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name||t.instrumentName||`Item ${a+1}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",t.quantity||1," × ",o(t.price||0)]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-bold text-green-600",children:o((t.quantity||1)*(t.price||0))})})]})},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Ge,{className:"h-5 w-5 mr-2"}),"Order Summary"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:o(l.subtotal||l.total||l.totalAmount||l.amount||l.totalPrice)})]}),l.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",o(l.discount)]})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{className:"text-green-600",children:o(l.total||l.totalAmount||l.amount||l.totalPrice)})]})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(Fe,{className:"h-5 w-5 mr-2"}),"Shipping Information"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Customer:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:((V=l.customer)==null?void 0:V.name)||((W=l.customerInfo)==null?void 0:W.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Address:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:l.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Payment Method:"}),e.jsx("p",{className:"text-gray-600 mt-1 capitalize",children:l.paymentMethod||"COD"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Order Date:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:q(l.createdAt)})]})]})]})]})]})}),e.jsx("div",{className:"p-6 border-t",children:e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 w-full sm:w-auto",onClick:()=>P(null),children:"Close"})})]})})]})};export{rt as default};
